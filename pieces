<div class="puzzle" id="puzzle"></div>

<script>
  const totalPieces = 10;
  const puzzle = document.getElementById('puzzle');

  // Create placeholders grid (2 rows Ã— 5 cols)
  for (let i = 0; i < totalPieces; i++) {
    const div = document.createElement('div');
    div.className = 'piece';
    const img = document.createElement('img');
    // ðŸ”‘ This line looks for images in /pieces/
    img.src = 'pieces/piece_' + Math.floor(i/5) + '_' + (i%5) + '.png';
    img.alt = 'Puzzle piece ' + i;
    div.appendChild(img);
    puzzle.appendChild(div);
  }

  // Reveal a piece if URL has ?piece=n
  const urlParams = new URLSearchParams(window.location.search);
  const pieceIndex = urlParams.get('piece');
  if (pieceIndex !== null) {
    const idx = parseInt(pieceIndex);
    const div = puzzle.children[idx];
    if (div) div.classList.add('revealed');
  }

  // Save revealed pieces so refresh doesnâ€™t reset
  const key = 'ceha_puzzle_revealed';
  const saved = JSON.parse(localStorage.getItem(key) || '[]');
  saved.forEach(i => {
    const d = puzzle.children[i];
    if (d) d.classList.add('revealed');
  });
  if (pieceIndex !== null && !saved.includes(parseInt(pieceIndex))) {
    saved.push(parseInt(pieceIndex));
    localStorage.setItem(key, JSON.stringify(saved));
  }

  // Show "Congrats" when complete
  function checkCompletion() {
    const revealed = document.querySelectorAll('.piece.revealed').length;
    if (revealed === totalPieces) {
      document.getElementById('congrats').style.display = 'block';
    }
  }
  checkCompletion();
</script>
